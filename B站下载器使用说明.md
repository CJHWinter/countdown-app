# 🎬 B站下载器使用说明

## ⚠️ 重要提示

B站现在需要**登录Cookie**才能下载视频。这是B站的反爬虫机制，必须先配置Cookie才能使用下载功能。

---

## 📋 快速开始（3步搞定）

### 步骤1：获取B站Cookie

#### 方法1：简单模式（推荐）⭐

1. **登录B站**：在浏览器中打开 https://www.bilibili.com 并登录
2. **打开开发者工具**：按 `F12` 键
3. **找到Cookie**：
   - 点击顶部的 **Application** 标签（如果没有，点击 `>>` 找到它）
   - 左侧展开：**Storage → Cookies → https://www.bilibili.com**
   - 在右侧Cookie列表中找到以下三个：
     - `SESSDATA` - 复制它的 **Value** 值
     - `bili_jct` - 复制它的 **Value** 值
     - `buvid3` - 复制它的 **Value** 值

4. **填入下载器**：
   - 在B站下载器界面，选择"简单模式"
   - 分别将三个值粘贴到对应的输入框
   - 点击"保存Cookie"

#### 方法2：高级模式（一键复制）

1. **登录B站**并打开开发者工具（`F12`）
2. **切换到Network标签**
3. **刷新页面**（`F5`）
4. **找到任意请求**，点击它
5. **复制Cookie**：
   - 在右侧找到 **Request Headers**
   - 找到 `Cookie:` 这一行
   - 复制整行Cookie值（很长的一串）
6. **填入下载器**：
   - 在B站下载器界面，选择"高级模式"
   - 粘贴到大文本框中
   - 点击"智能解析"
   - 确认后点击"保存Cookie"

---

### 步骤2：输入视频链接

在"视频下载"区域，输入B站视频链接，例如：
```
https://www.bilibili.com/video/BV1vcRjYUEHe
```

点击"获取信息"按钮。

---

### 步骤3：开始下载

1. 选择视频质量（最高、高清、标清、最低）
2. 选择音频质量（最高、高、中、低）
3. 点击"开始下载"
4. 等待下载完成
5. **自动弹出分类选择框**
6. 选择"学习音乐"或"休息音乐"
7. 文件自动移动并刷新主应用音乐列表

---

## 🔧 常见问题

### ❌ 问题1：HTTP Error 412: Precondition Failed

**原因**：未设置Cookie或Cookie已过期

**解决方案**：
1. 确保已经按照步骤1获取并保存了Cookie
2. 如果已保存，可能是Cookie过期了，重新获取一次
3. 确保Cookie是从**已登录**的B站账号获取的

---

### ❌ 问题2：获取视频信息失败

**原因**：
- Cookie未设置
- 视频链接不正确
- 视频需要大会员权限

**解决方案**：
1. 检查Cookie是否已保存
2. 确认视频链接格式正确
3. 如果是大会员视频，确保你的B站账号有大会员

---

### ❌ 问题3：Cookie在哪里？

**Chrome/Edge浏览器**：
1. `F12` → `Application` → `Cookies` → `https://www.bilibili.com`

**Firefox浏览器**：
1. `F12` → `Storage` → `Cookies` → `https://www.bilibili.com`

**Safari浏览器**：
1. `开发` → `显示Web检查器` → `存储` → `Cookie`

---

### ❌ 问题4：Cookie多久过期？

B站的Cookie通常有效期为**1-3个月**。如果下载失败，可能需要重新获取Cookie。

---

### ❌ 问题5：为什么需要Cookie？

这是B站的反爬虫机制。Cookie证明你是一个真实的、已登录的用户，而不是机器人。

---

## 💡 使用技巧

### 技巧1：保存Cookie

Cookie保存后会一直有效，不需要每次都输入。只有当Cookie过期时才需要重新获取。

### 技巧2：批量下载

可以一个接一个地下载多个视频，不需要等待前一个下载完成。

### 技巧3：选择合适的质量

- **学习用音乐**：选择"最低质量"即可，节省空间和时间
- **休息用视频**：选择"高清"或"最高质量"，获得更好的体验

### 技巧4：快速分类

下载完成后会自动弹出分类选择框，选择后自动添加到音乐列表，无需手动操作。

---

## 📸 图文教程

### 获取Cookie（Chrome浏览器）

```
1. 打开B站并登录
   ↓
2. 按 F12 打开开发者工具
   ↓
3. 点击顶部 "Application" 标签
   ↓
4. 左侧：Storage → Cookies → https://www.bilibili.com
   ↓
5. 在右侧列表中找到：
   - SESSDATA
   - bili_jct
   - buvid3
   ↓
6. 双击 "Value" 列，复制值
   ↓
7. 粘贴到下载器对应输入框
   ↓
8. 点击 "保存Cookie"
```

---

## 🎯 完整工作流程

```
登录B站 → 获取Cookie → 保存到下载器
    ↓
输入视频链接 → 获取信息
    ↓
选择质量 → 开始下载
    ↓
下载完成 → 自动弹出分类框
    ↓
选择分类（学习/休息）
    ↓
自动移动文件 → 自动刷新列表
    ↓
立即可用！
```

---

## 🔒 安全说明

### Cookie安全吗？

- ✅ Cookie只保存在**你的本地电脑**上
- ✅ 不会上传到任何服务器
- ✅ 只用于从B站下载视频
- ⚠️ 不要将Cookie分享给他人（相当于账号密码）

### 如何保护Cookie？

1. 不要在公共电脑上使用
2. 不要截图或复制Cookie给他人
3. 定期更换B站密码会使Cookie失效

---

## 📝 支持的视频类型

- ✅ 普通视频（BV号）
- ✅ 番剧/电影（需要相应权限）
- ✅ UP主投稿视频
- ✅ 音乐视频
- ⚠️ 部分付费内容可能无法下载

---

## 🆘 仍然无法使用？

### 检查清单

- [ ] 已在B站登录
- [ ] 已获取Cookie（SESSDATA、bili_jct、buvid3）
- [ ] 已在下载器中保存Cookie
- [ ] 视频链接格式正确
- [ ] 服务器正在运行（两个窗口都打开）

### 测试Cookie是否有效

1. 保存Cookie后
2. 输入任意视频链接
3. 点击"获取信息"
4. 如果能看到视频标题、时长等信息，说明Cookie有效

---

## 💬 错误信息对照表

| 错误信息 | 原因 | 解决方案 |
|---------|------|---------|
| HTTP Error 412 | Cookie未设置或过期 | 重新获取并保存Cookie |
| HTTP Error 403 | 权限不足 | 检查是否需要大会员 |
| Unable to download webpage | 网络问题或Cookie无效 | 检查网络和Cookie |
| Video not found | 视频不存在或已删除 | 检查链接是否正确 |

---

**版本**: 1.0.0  
**更新日期**: 2025-11-07  
**适用于**: 倒计时氛围感应用 v2.0.0

